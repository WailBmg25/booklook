{
  "name": "Auto Commit & Branch Manager",
  "description": "Automatically commits and pushes changes after every task completion, and creates new branches when moving between phases",
  "version": "1.0.0",
  "triggers": [
    {
      "type": "onTaskComplete",
      "enabled": true
    },
    {
      "type": "onPhaseChange",
      "enabled": true
    }
  ],
  "actions": [
    {
      "name": "Commit and Push on Task Complete",
      "trigger": "onTaskComplete",
      "steps": [
        {
          "type": "bash",
          "command": "git add -A"
        },
        {
          "type": "bash",
          "command": "git commit -m 'Task completed: {{task.name}} - {{task.description}}' || echo 'No changes to commit'"
        },
        {
          "type": "bash",
          "command": "git push origin $(git branch --show-current) || echo 'Push failed or no remote configured'"
        }
      ]
    },
    {
      "name": "Create Branch on Phase Change",
      "trigger": "onPhaseChange",
      "steps": [
        {
          "type": "bash",
          "command": "git add -A"
        },
        {
          "type": "bash",
          "command": "git commit -m 'Phase {{phase.previous}} completed - Moving to Phase {{phase.current}}' || echo 'No changes to commit'"
        },
        {
          "type": "bash",
          "command": "git push origin $(git branch --show-current) || echo 'Push failed'"
        },
        {
          "type": "bash",
          "command": "git checkout -b phase-{{phase.current}} || git checkout phase-{{phase.current}}"
        },
        {
          "type": "bash",
          "command": "git push -u origin phase-{{phase.current}} || echo 'Branch already exists on remote'"
        }
      ]
    }
  ]
}
